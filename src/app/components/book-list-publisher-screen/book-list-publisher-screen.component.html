<ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header text-white bg-dark">
        <h4 class="modal-title" id="modal-basic-title">Hey, Got new book!</h4>
        <button type="button" class="close text-white" style="outline: none;" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body" style="padding: 30px;">
        <form [formGroup]="addBookForm" (ngSubmit)="functionOnSubmit()">
            <div class="form-group">
                <label>Book Name</label>
                <input [ngClass]="{ 'is-invalid': submitted && f.bookName.errors }" formControlName="bookName" type="text" class="form-control" placeholder="Enter Book Name" />

                <div *ngIf="submitted && f.bookName.errors" class="invalid-feedback">
                    <div *ngIf="f.bookName.errors.required">Book Name is required</div>
                </div>
            </div>
            <div class="form-group">
                <label>Author</label>
                <input [ngClass]="{ 'is-invalid': submitted && f.bookAuthor.errors }" formControlName="bookAuthor" type="text" class="form-control" placeholder="Enter Author Name" />

                <div *ngIf="submitted && f.bookName.errors" class="invalid-feedback">
                    <div *ngIf="f.bookAuthor.errors.required">Author Name is required</div>
                </div>
            </div>
            <div class="form-group">
                <label>Publisher</label>
                <input [ngClass]="{ 'is-invalid': submitted && f.bookPublisher.errors }" type="text" class="form-control" formControlName="bookPublisher" placeholder="Enter Publisher Name" />

                <div *ngIf="submitted && f.bookPublisher.errors" class="invalid-feedback">
                    <div *ngIf="f.bookPublisher.errors.required">Publisher Name is required</div>
                </div>
            </div>
            <div class="form-group">
                <label>Book Pdf</label>
                <div class="custom-file mb-3">
                    <input type="file" class="custom-file-input" (change)="onFileSelected($event)" id="bookFile" name="bookFile" accept=".pdf" />
                    <label *ngIf="this.fileToUpload == null" class="custom-file-label">Choose file</label>
                    <label *ngIf="this.fileToUpload != null" class="custom-file-label">{{ this.fileToUpload.name }}</label>
                </div>
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Save</button>
            </div>
        </form>
    </div>
</ng-template>

<ng-template #viewpdfcontent let-c="close" let-d="dismiss">
    <div class="modal-header text-white bg-dark">
        <h4 class="modal-title" id="modal-basic-title">Hey, Got new book!</h4>
        <button type="button" class="close text-white" style="outline: none;" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body" style="padding: 30px;">
        <iframe [src]="getBookURL()" width="100%" height="500px"> </iframe>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="c('Save click')">Close</button>
    </div>
</ng-template>

<div style="background-color: white;">
    <div style="height: 50px; float: right; margin-top: 4px;">
        <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" />
            <button class="btn btn-outline-danger my-2 my-sm-0" type="submit" placement="bottom"><b>Search</b></button>
        </form>
    </div>
    <table class="table">
        <thead style="border-bottom: black; border-top: white;">
            <tr class="text-center">
                <th scope="col">ID</th>
                <th scope="col">Uploader</th>
                <th scope="col">Book Name</th>
                <th scope="col">Author</th>
                <th scope="col">Publisher</th>
                <th scope="col">Admin Approval</th>
                <th scope="col">Publisher Approval</th>
                <th scope="col">Views</th>
                <th scope="col">Downloads</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody class="table-striped">
            <tr class="text-center" *ngFor="let book of bookList | paginate: { id: 'pagination_list', itemsPerPage: 7, currentPage: page, totalItems: totalRecords }">
                <td>{{ book.id }}</td>
                <td>
                    <span ngbTooltip="{{ book.uploaderId }}">{{ book.uploaderId }}</span>
                </td>
                <td>{{ book.bookName }}</td>
                <td>{{ book.author }}</td>
                <td>{{ book.publisher }}</td>
                <td>{{ book.adminApproval == 1 ? 'APPROVED' : 'PENDING' }}</td>
                <td>{{ book.publisherApproval == 1 ? 'APPROVED' : 'PENDING' }}</td>
                <td>{{ book.countView }}</td>
                <td>{{ book.countDownload }}</td>
                <td>
                    <button class="btn btn-sm m-1" (click)="clickOnPublisherStatus(book.id, 1)" style="color: green;">
                        <i class="fa fa-check" aria-hidden="true"></i>
                    </button>
                    <button class="btn btn-sm m-1" (click)="clickOnPublisherStatus(book.id, 0)" style="color: red;">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </button>
                    <button class="btn btn-sm m-1" (click)="bookToView = book; openXl(viewpdfcontent)" style="color: skyblue;">
                        <i class="fa fa-eye" aria-hidden="true"></i>
                    </button>
                    <a href="http://localhost:8000/Download/{{ book.fileName.replace('Uploads/', '') }}?bookName={{ book.bookName }}&user_id={{ user.id }}&user_token={{ user.token }}" download>
                        <button class="btn btn-sm m-1">
                            <i class="fa fa-download" aria-hidden="true" style="color: greenyellow;"></i>
                        </button>
                    </a>
                    <button class="btn btn-sm m-1" (click)="clickOnDelete(book.id)" style="color: red;">
                        <i class="fa fa-trash"></i>
                    </button>
                </td>
            </tr>
            <tr class="text-center">
                <td colspan="9"></td>
                <td>
                    <button class="btn btn-sm btn-info m-1" (click)="open(content)">
                        Add New
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div>
    <pagination-controls id="pagination_list" maxSixe="5" directionLinks="true" (pageChange)="page = $event"></pagination-controls>
</div>
<div class="card">
    <tr>
        <td>xcvxc</td>
        <td>xcvxc</td>
        <td>xcvxc</td>
        <td>xcvxc</td>
        <td>xcvxc</td>
        <td>xcvxc</td>
    </tr>
</div>
